{"is_source_file": true, "format": "JavaScript (React hook)", "description": "This file implements a React hook 'useLocalMoods' which manages mood entries stored locally in the browser's localStorage. It provides functionalities for reading, writing, normalizing, adding, deleting mood entries, and computing various statistics and chart data related to moods, such as averages, streaks, distributions, and time series data.", "external_files": ["react"], "external_methods": ["useCallback", "useEffect", "useMemo", "useState"], "published": ["useLocalMoods"], "classes": [], "methods": [{"name": "readEntries()", "description": "Reads and parses mood entries from localStorage using the key 'mood-tracker:entries'. Returns an array of entries or an empty array on error.", "scope": "", "scopeKind": ""}, {"name": "writeEntries(entries)", "description": "Serializes and saves the array of mood entries to localStorage under the specified key.", "scope": "", "scopeKind": ""}, {"name": "normalizeEntry(partial)", "description": "Normalizes a mood entry object, assigning default values, generating IDs if needed, and parsing tags.", "scope": "", "scopeKind": ""}, {"name": "startOfDayISO(dateISO)", "description": "Converts a date string to the ISO string representing the start of that day in UTC.", "scope": "", "scopeKind": ""}, {"name": "getDateRange(days)", "description": "Generates an array of ISO date strings representing the date range for a specified number of days ending today.", "scope": "", "scopeKind": ""}, {"name": "averageMood(entries)", "description": "Calculates the average mood score from an array of entries.", "scope": "", "scopeKind": ""}, {"name": "bestStreak(entries)", "description": "Calculates the longest consecutive streak of days with mood >= 3.", "scope": "", "scopeKind": ""}, {"name": "distribution(entries)", "description": "Computes the frequency count of each mood value (1-5) across entries.", "scope": "", "scopeKind": ""}, {"name": "useLocalMoods()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["readEntries", "writeEntries", "normalizeEntry", "startOfDayISO", "getDateRange", "averageMood", "bestStreak", "distribution", "setMoods", "Number", "Math.min", "Math.max", "useCallback", "useEffect", "useMemo", "useState"], "search-terms": ["useLocalMoods", "localStorage", "mood entries", "mood tracker", "React hook", "mood statistics", "time series moods", "streak calculation", "mood distribution"], "state": 2, "file_id": 15, "knowledge_revision": 31, "git_revision": "", "ctags": [{"_type": "tag", "name": "1", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^  const dist = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };$/", "language": "JavaScript", "kind": "property", "scope": "distribution.dist", "scopeKind": "class"}, {"_type": "tag", "name": "2", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^  const dist = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };$/", "language": "JavaScript", "kind": "property", "scope": "distribution.dist", "scopeKind": "class"}, {"_type": "tag", "name": "3", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^  const dist = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };$/", "language": "JavaScript", "kind": "property", "scope": "distribution.dist", "scopeKind": "class"}, {"_type": "tag", "name": "4", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^  const dist = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };$/", "language": "JavaScript", "kind": "property", "scope": "distribution.dist", "scopeKind": "class"}, {"_type": "tag", "name": "5", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^  const dist = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };$/", "language": "JavaScript", "kind": "property", "scope": "distribution.dist", "scopeKind": "class"}, {"_type": "tag", "name": "ENTRIES_KEY", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^const ENTRIES_KEY = 'mood-tracker:entries';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "averageMood", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^function averageMood(entries) {$/", "language": "JavaScript", "kind": "function", "signature": "(entries)"}, {"_type": "tag", "name": "baseURL", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^const baseURL = process.env.REACT_APP_API_BASE || null;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "bestStreak", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^function bestStreak(entries) {$/", "language": "JavaScript", "kind": "function", "signature": "(entries)"}, {"_type": "tag", "name": "dist", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^  const dist = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };$/", "language": "JavaScript", "kind": "class", "scope": "distribution", "scopeKind": "class"}, {"_type": "tag", "name": "distribution", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^function distribution(entries) {$/", "language": "JavaScript", "kind": "function", "signature": "(entries)"}, {"_type": "tag", "name": "getDateRange", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^function getDateRange(days) {$/", "language": "JavaScript", "kind": "function", "signature": "(days)"}, {"_type": "tag", "name": "normalizeEntry", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^function normalizeEntry(partial) {$/", "language": "JavaScript", "kind": "function", "signature": "(partial)"}, {"_type": "tag", "name": "readEntries", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^function readEntries() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "startOfDayISO", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^function startOfDayISO(dateISO) {$/", "language": "JavaScript", "kind": "function", "signature": "(dateISO)"}, {"_type": "tag", "name": "useLocalMoods", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^export function useLocalMoods() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "writeEntries", "path": "/home/kavia/workspace/code-generation/mood-tracker-visualizer-284995-285012/frontend_react/src/hooks/useLocalMoods.js", "pattern": "/^function writeEntries(entries) {$/", "language": "JavaScript", "kind": "function", "signature": "(entries)"}], "hash": "229e02bb33b69e417fdef3f8b21012ee", "format-version": 4, "code-base-name": "frontend_react", "filename": "frontend_react/src/hooks/useLocalMoods.js", "fields": [{"name": "const dist = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 };", "scope": "distribution.dist", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"31": ""}]}